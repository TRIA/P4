stages:
  - build
  - test

#job_npl_bmodel:
#  script:
#    - sudo -S su
#    - cd dataplane/npl/bmodel/efcp_router
#    - make build
#    - make test
#  tags: [npl_bmodel]

job_efcp_build:
  script:
    - cd dataplane/p4
    - make efcp-build
#  tags: [build]
  stage: build
  tags: [npl_bmodel]

job_cp_test:
  script:
    - sudo -S su
    - cd controlplane/p4
    - make edf-cp-test-mock
    - cat test/edf-cp-server-mock.log
    - cat test/edf-cp-client.log
  dependencies:
    - job_efcp_build
  stage: test
#  tags: [test]
  tags: [npl_bmodel]
